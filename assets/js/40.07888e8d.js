(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{571:function(t,s,a){"use strict";a.r(s);var n=a(8),p=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"页面滚动条引发的抖动出发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#页面滚动条引发的抖动出发"}},[t._v("#")]),t._v(" 页面滚动条引发的抖动出发")]),t._v(" "),a("p",[t._v("为了实现简单的水平居中布局，我们没少使用 margin: 0 auto； 来实现。")]),t._v(" "),a("p",[t._v("然而，这种布局一直存在一个影响用户体验的隐患。我们都知道，现代浏览器滚动条默认是 overflow: auto 类型的，也就是如果尺寸不足一屏，没有滚动条；超出，出现滚动条...")]),t._v(" "),a("p",[t._v("那么，问题来了 -_- !")]),t._v(" "),a("p",[t._v("首先是简单的信息流页面，是从上往下 push 渲染的，如果信息没有超出一屏，都很好说，但是如果超出，那么滚动条就会出现，自然\nmargin: 0 auto; 主体元素就会做偏移，用户就会很明显感受到屏幕的抖动")]),t._v(" "),a("p",[t._v("其他场景，比如，点击加载更多，或者 Tab 切换到有滚动条的区块，都会感觉到抖动。")]),t._v(" "),a("p",[t._v("公司的 Web 产品一直存在这个问题，我个人觉得这个很影响体验，所以找了不少资料，也找了不少方案，在这里做一次总结。")]),t._v(" "),a("ul",[a("li",[t._v("高度确认的，可以用 CSS 把页面尺寸布局骨架搭好，再往里面渲染数据。这样子的话，要么没有滚动条，要么数据直接出现，不会出现跳动，但是这样方式还是存在局限性")]),t._v(" "),a("li",[t._v("还有一种简单粗暴的方式，直接设置 overflow: scroll，这就意味着，即使是在高度较小的时候，也会出现一个滚动条，而且貌似也不好看，存在的意义不明。")])]),t._v(" "),a("p",[t._v("经过查找，有一种方式，算是比较匹配我的需求")]),t._v(" "),a("p",[t._v("使用 CSS3 计算 calc 和 vw 单位巧妙实现")]),t._v(" "),a("p",[t._v("可以简单为容器设置样式：")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".wrap-outer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin-left")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("calc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100vw - 100%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("// 或者\n\n.wrap-outer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding-left")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("calc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100vw - 100%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("100vw 相对于 \b 浏览器的 window.innerWidth ，是浏览器的内部宽度，这里包括了滚动条的宽度，而我们所使用的 100% 是不包含滚动条宽度的")]),t._v(" "),a("p",[t._v("于是我们就可以愉快的实现不抖动的需求了")]),t._v(" "),a("p",[t._v("兼容性方面的话，支持 IE9+ 以及其他现代浏览器")]),t._v(" "),a("h2",{attrs:{id:"消逝的滚动条"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消逝的滚动条"}},[t._v("#")]),t._v(" 消逝的滚动条")]),t._v(" "),a("p",[t._v("既然讲到了滚动条，后面自己也查阅的不少资料，\b 可以 \b 了解一些相关历史。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/12/zMEhjDKZcHF8iya.png",alt:""}})]),t._v(" "),a("p",[t._v("（windows 上面的滚动条变化历程）")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/12/yANPOhWjM8tTkro.png",alt:""}})]),t._v(" "),a("p",[t._v("（Mac 上面的滚动条）")]),t._v(" "),a("p",[t._v("在这里大赞 Mac，从 2011 年开始，所有的滚动条均从 Mac 电脑消失，不再占据任何页面空间，只有用户触发滚动时才会重新出现，当然用户可以设置默认显示。")]),t._v(" "),a("p",[t._v("对于开发者和设计师来说，这真的是一个好消息，毕竟计算滚动条的宽度总是不够优雅。")]),t._v(" "),a("p",[t._v("可是！\b 划重点！")]),t._v(" "),a("p",[t._v("我们平时可能要使用各种各样的操作系统和浏览器，并且对滚动条的实现方式又各不同，所以我们还是不能避免这个问题......( 手动微笑脸 )")]),t._v(" "),a("h2",{attrs:{id:"滚动条宽度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#滚动条宽度"}},[t._v("#")]),t._v(" 滚动条宽度")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/12/8j2zGNxFpsRMnPf.png",alt:""}})]),t._v(" "),a("p",[t._v("（\b“百花齐放”的宽度）")]),t._v(" "),a("p",[t._v("这里，笔者也是转载 \b 其他资料的数据，可能有些误差。")]),t._v(" "),a("p",[t._v("但是只要记得一点，这是一个深坑......")]),t._v(" "),a("p",[t._v("我们可以通过 JavaScript 来计算宽度（以下代码仅能测出原始的宽度，通过 CSS \b 改变后，便不准了）")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" outer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" inner "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("overflow "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'scroll'")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("outer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" scrollbarWidth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" outer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetWidth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" inner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetWidth\n\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("outer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("因为 \b\b 涉及到了操作 DOM，为了性能起见，应该避免这类操作")])])}),[],!1,null,null,null);s.default=p.exports}}]);